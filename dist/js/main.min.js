var draw=function(){var t=document.querySelector("main").offsetWidth,e=document.querySelector("main").offsetHeight,n=document.createElement("canvas"),a=n.getContext("2d"),r=n.getBoundingClientRect(),i=0,o=0,d=0,c=0,s=0,l=0,u=!1,w=!1,f="",g=!1;return{setXY:function(t){u=i,w=o,i=t.clientX-r.left-n.offsetLeft,o=t.clientY-r.top-n.offsetTop},writeXY:function(){document.getElementById("trackX").innerHTML="X: "+i,document.getElementById("trackY").innerHTML="Y: "+o},setStart:function(){d=i,c=o},setEnd:function(){s=i,l=o},setShape:function(t){f=t},getShape:function(){return f},setIsDrawing:function(t){g=t},getIsDrawing:function(){return g},draw:function(){a.restore(),"rectangle"===f?this.drawRect():"line"===f?this.drawLine():"path"===f?this.drawPath():"circle"===f?this.drawCircle():"triangle"===f?this.drawTriangle():alert("Please choose a shape"),a.save()},drawCircle:function(){a.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),a.fillStyle="#"+Math.floor(16777215*Math.random()).toString(16);let t=d-s,e=c-l,n=Math.sqrt(t*t+e*e);a.beginPath(),a.arc(d,c,n,0,2*Math.PI),a.stroke(),a.fill()},drawLine:function(){a.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),a.beginPath(),a.moveTo(d,c),a.lineTo(s,l),a.stroke()},drawTriangle:function(){a.fillStyle="#"+Math.floor(16777215*Math.random()).toString(16),a.beginPath(),a.moveTo(d,c),a.lineTo(d,l),a.lineTo(s,l),a.stroke(),a.fill()},drawPath:function(){a.strokeStyle="#"+Math.floor(16777215*Math.random()).toString(16),a.beginPath(),a.moveTo(u,w),a.lineTo(i,o),a.stroke()},drawRect:function(){a.fillStyle="#"+Math.floor(16777215*Math.random()).toString(16),a.fillRect(d,c,s-d,l-c)},getCanvas:function(){return n},init:function(){n.width=t,n.height=e,document.querySelector("main").appendChild(n)}}}();draw.init(),draw.getCanvas().addEventListener("mousemove",function(t){draw.setXY(t),draw.writeXY(),"path"==draw.getShape()&&!0===draw.getIsDrawing()&&draw.draw()},!1),draw.getCanvas().addEventListener("mousedown",function(){draw.setStart(),draw.setIsDrawing(!0)},!1),draw.getCanvas().addEventListener("mouseup",function(){draw.setEnd(),draw.draw(),draw.setIsDrawing(!1)},!1),draw.getCanvas().addEventListener("mouseup",function(){draw.setEnd(),draw.draw(),draw.setIsDrawing(!1)},!1),draw.getCanvas().addEventListener("mousedown",function(){draw.setStart(),draw.setIsDrawing(!0)},!1),document.getElementById("btnRect").addEventListener("click",function(){draw.setShape("rectangle")},!1),document.getElementById("btnLine").addEventListener("click",function(){draw.setShape("line")},!1),document.getElementById("btnCircle").addEventListener("click",function(){draw.setShape("circle")},!1),document.getElementById("btnPath").addEventListener("click",function(){draw.setShape("path")},!1),document.getElementById("btnTriangle").addEventListener("click",function(){draw.setShape("triangle")},!1);